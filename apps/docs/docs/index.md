---
title: Что ещё за Battlesnake?
description: Battlesnake - соревновательная игра для разработчиков
slug: /
pagination_next: null
pagination_prev: null
---

# Что ещё за Battlesnake?

**Battlesnake** - это реалтайм-соревнование "боевых червячков", за каждым из которых стоит веб-сервер и алгоритм принятия решений. Червячки перемещаются по игровому полю, ищут еду, избегают или же атакуют других игроков и стараются продержаться на поле дольше остальных. 

**Разработчики любого уровня** используют среду Battlesnake для изучения нового, наработки своих скиллов, а также просто ради фана - устроить соревнование с друзьями или коллегами. Для старта достаточно начальных навыков в программировании: понимания переменных, условных конструкций, циклов, функций, обработки типовых структур данных. Достичь наивысших результатов помогают креативность, стратегическое мышление, знание алгоритмов.

Игра происходит на прямоугольном поле, на котором одновременно находится от 1 до 8 червячков той или иной длины. На старте каждый Червячок занимает одну клетку, но по ходу игры они могут расти. 

**Победить в Battlesnake довольно просто** - нужно продержаться на игровом поле дольше других. Для этого твоему Червячку нужно два условия: **пространство** для хода и **здоровье** для выживания, иначе - он выбывает.

Все червячки начинают игру с полным здоровьем, но с каждым ходом теряют по одному пункту. Если здоровье приближается к нулю, стоит обеспокоиться поиском еды.

### Игровое поле

Игровое поле описывается стандартной 2D-сеткой с началом координат (0,0) в левом нижнем углу. Ось Y направлена вверх, ось X направлена вправо. Координаты начинаются с нуля, таким образом поле размером 11х11 будет иметь координаты \[0, 10].

![Battlesnake Coordinate System](/img/coordinate_system.png)


### Столкновения

Во время игры может произойти три вида столкновений.

* **Столкновение с собой.** Если твой Червячок сталкивается со своим телом, он выбывает из игры. Это простейший тип коллизии, и с его обработки стоит начать.

* **Столкновение с телом соперника.** Как пишут разработчики, "Battlesnake это не только про находчивость, но и про уважение, и если твой Червячок атакует соперника недостойным образом, он также будет исключен из игры". Иными словами - сталкиваться с туловищем других игроков нельзя.

* **Столкновение лбами.** Другое дело, когда два червячка сталкиваются головами. В таком случае более длинный Червячок побеждает в честной схватке. Если нюанс: если их длины одинаковые, выбывают оба!

Также, важно следить за границами поля, ведь выход за них повлечет немедленное выбывание.

### Пополнение здоровья

Традиционный способ восполнить жизненные силы - поесть. Если Червячок заходит на ячейку с едой, его здоровье мгновенно восстанавливается до максимума (100 пунктов). 

Но у этого есть побочный эффект - каждый кусочек еды увеличивает длину Червячка, и это стоит учитывать при продумывании стратегии.

Тайминг и место спавна еды зависит от игрового режима и настроек организаторов. В большинстве случаев, при старте игры на поле уже есть несколько кусочков, а дальнейшие появляются с некоторым интервалом.

![Snakes consuming food](/img/consuming-food.gif)

### Обработка ходов

Алгоритм хода можно разделить на три этапа.

**1. Каждому игроку отправляется запрос.** Движок отправляет всем игрокам запрос на их веб-серверы, предоставляя в нем детальную информацию о состоянии игрового поля и всех Червячков. 

**2. Червячки отвечают, отправляя свой ход.** Получив запрос от движка, у Червячков есть ограниченное время (500 мс) на выбор следующего хода (*вверх*, *вниз*, *вправо*, *влево*). Если Червячок не успевает ответить, то он продолжает двигаться в том же направлении.

**3. Движок обрабатывает ответы.** Когда ходы всех Червячков известны, движок обновляет состояние игрового поля в следующем особом порядке:

   * Обновляется состояние каждого Червячка:
      * Голова перемещается на клетку в соответствии с выбранным направлением.
      * Хвост удаляется.
      * Здоровье уменьшается на 1.

   * Червячки, нашедшие еду, потребляют ее:
      * Здоровье устанавливается на максимум.
      * Червячок готовится расти - на следующем ходу его длина увеличится на 1.
      * Съеденная еда удаляется с поля.

   * На свободных ячейках может заспавниться новая еда.

   * Червячок удаляется с игрового поля, если происходит хотя бы одно из событий:
      * Здоровье меньше или равно нулю
      * Выход за границы поля
      * Столкновение с собой
      * Столкновение с телом другого Червячка
      * Столкновение лбами при меньшей или равной длине  

   * Цикл повторяется, пока на поле не останется один Червячок.
